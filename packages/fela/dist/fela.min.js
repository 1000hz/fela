!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Fela=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e){var t=0,n=0,r=void 0,i=e.length;if(0===i)return"";for(;i>n;++n)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return"-"+t.toString(36)}function n(e){return Object.keys(e).sort().reduce(function(t,n){return t+n+e[n]},"")}function r(e){return Object.keys(y).reduce(function(t,n){return e.indexOf(n)>-1&&(t=y[n]),t},void 0)}function i(e){return Object.keys(e).forEach(function(t){var n=e[t];n instanceof Object&&!Array.isArray(n)?(e[t]=v(t)||p(t)?i(n):{},0===Object.keys(e[t]).length&&delete e[t]):"string"!=typeof n&&"number"!=typeof n?delete e[t]:"string"==typeof n&&n.indexOf("undefined")>-1&&delete e[t]}),e}function o(e){var t=e.plugins,n=e.style;return t.forEach(function(t){return n=t(e)}),n}function s(e){return Object.keys(e).reduce(function(t,n){return t.length>0&&(t+=";"),t+=b(n)+":"+e[n]},"")}function u(e,t){var n=arguments.length<=2||void 0===arguments[2]?[""]:arguments[2],r=Object.keys(e).reduce(function(t,n){return t+n+"{"+s(i(e[n]))+"}"},"");return n.reduce(function(e,n){return e+"@"+n+"keyframes "+t+"{"+r+"}"},"")}function a(e,t){if(!e||e.nodeType!==O)throw new Error("You need to specify a valid element node (nodeType = 1) to render into.");e.setAttribute("data-fela-stylesheet",""),e.textContent="";var n=new m(t);return n.subscribe(function(t){return e.textContent=t}),n.mountNode=e,n}function f(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return function(t){return e.forEach(function(e){return t=e(t)}),t}}function c(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return t.reduce(function(t,n){return x(t,n(e))},{})}}var l={};l["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l["extends"]=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var h=e(function(e){function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n}),d=h&&"object"==typeof h&&"default"in h?h["default"]:h,y=(e(function(e){var t=d,n=t;e.exports=n}),{".woff":"woff",".eof":"eof",".ttf":"truetype",".svg":"svg"}),p=function(e){return"@media"===e.substr(0,6)},v=function(e){return":"===e.charAt(0)},g=e(function(e){function t(e){return e.replace(n,"-$&").toLowerCase().replace(r,"-ms-")}var n=/[A-Z]/g,r=/^ms-/;e.exports=t}),b=g&&"object"==typeof g&&"default"in g?g["default"]:g,m=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];l.classCallCheck(this,e),this.listeners=[],this.keyframePrefixes=t.keyframePrefixes||["-webkit-","-moz-"],this.keyframePrefixes.push(""),this.plugins=t.plugins||[],this.clear()}return l.createClass(e,[{key:"clear",value:function(){this.fontFaces="",this.keyframes="",this.statics="",this.rules="",this.mediaRules={},this.rendered={},this.base={},this.ids=[],this._emitChange()}},{key:"renderRule",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.ids.indexOf(e)<0&&(this.ids.push(e),this.renderRule(e,{}));var n=this.ids.indexOf(e),r="c"+n+this._generatePropsReference(t);if(!this.rendered.hasOwnProperty(r)){var s={plugins:this.plugins,processStyle:o,style:e(t),props:t},u=i(o(s));this._renderStyle(r,u,this.base[n]),this.rendered[r]=this._didChange,this._didChange&&(this._didChange=!1,this._emitChange()),r==="c"+n&&(this.base[n]=u)}var a="c"+n;return this.rendered[r]?r!==a?a+" "+r:r:a}},{key:"renderKeyframe",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.ids.indexOf(e)<0&&this.ids.push(e);var n=this._generatePropsReference(t),r="k"+this.ids.indexOf(e)+n;if(!this.rendered.hasOwnProperty(r)){var i={plugins:this.plugins,processStyle:o,style:e(t),props:t},s=o(i),a=u(s,r,this.keyframePrefixes);this.rendered[r]=!0,this.keyframes+=a,this._emitChange()}return r}},{key:"renderFont",value:function(e,t){var n=this,i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this.rendered.hasOwnProperty(e)||!function(){var o={fontFamily:"'"+e+"'",src:t.map(function(e){return"url('"+e+"') format('"+r(e)+"')"}).join(",")},u=["fontVariant","fontWeight","fontStretch","fontStyle","unicodeRange"];Object.keys(i).filter(function(e){return u.indexOf(e)>-1}).forEach(function(e){return o[e]=i[e]});var a="@font-face{"+s(o)+"}";n.rendered[e]=!0,n.fontFaces+=a,n._emitChange()}(),e}},{key:"renderStatic",value:function(e,t){var n="string"==typeof e?e:t;if(!this.rendered.hasOwnProperty(n)){if("string"==typeof e)this.statics+=e.replace(/\s{2,}/g,"");else{var r={plugins:this.plugins,processStyle:o,style:e};this.statics+=t+"{"+s(o(r))+"}"}this.rendered[n]=!0,this._emitChange()}}},{key:"renderToString",value:function(){var e=this.fontFaces+this.statics+this.rules;for(var t in this.mediaRules)e+="@media "+t+"{"+this.mediaRules[t]+"}";return e+this.keyframes}},{key:"subscribe",value:function(e){var t=this;return this.listeners.push(e),{unsubscribe:function(){return t.listeners.splice(t.listeners.indexOf(e),1)}}}},{key:"_emitChange",value:function(){var e=this.renderToString();this.listeners.forEach(function(t){return t(e)})}},{key:"_generatePropsReference",value:function(e){return t(n(e))}},{key:"_renderStyle",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=this,i=arguments.length<=3||void 0===arguments[3]?"":arguments[3],o=arguments.length<=4||void 0===arguments[4]?"":arguments[4],u=Object.keys(t).reduce(function(s,u){var a=t[u];if(a instanceof Object&&!Array.isArray(a)){if(v(u))r._renderStyle(e,a,n[u],i+u,o);else if(p(u)){var f=u.slice(6).trim(),c=o.length>0?o+" and "+f:f;r._renderStyle(e,a,n[u],i,c)}}else n.hasOwnProperty(u)&&n[u]===a||(s[u]=a);return s},{});if(Object.keys(u).length>0){var a="."+e+i+"{"+s(u)+"}";this._didChange=!0,o.length>0?(this.mediaRules.hasOwnProperty(o)||(this.mediaRules[o]=""),this.mediaRules[o]+=a):this.rules+=a}}}]),e}(),O=1,k=e(function(e){e.exports=function(e){var t="undefined"==typeof e?"undefined":l["typeof"](e);return null!==e&&("object"===t||"function"===t)}}),j=k&&"object"==typeof k&&"default"in k?k["default"]:k,w=e(function(e){function t(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function n(e,t,n){var s=t[n];if(void 0!==s&&null!==s){if(o.call(e,n)&&(void 0===e[n]||null===e[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");o.call(e,n)&&i(s)?e[n]=r(Object(e[n]),t[n]):e[n]=s}}function r(e,t){if(e===t)return e;t=Object(t);for(var r in t)o.call(t,r)&&n(e,t,r);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),u=0;u<i.length;u++)s.call(t,i[u])&&n(e,t,i[u]);return e}var i=j,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(e){e=t(e);for(var n=1;n<arguments.length;n++)r(e,arguments[n]);return e}}),x=w&&"object"==typeof w&&"default"in w?w["default"]:w;console.warn("You are using a minified version of Fela. If you want to get warnings please use an unminified version (process.env.NODE_ENV=development).");var C={createRenderer:a,applyMiddleware:f,combineRules:c};return C});